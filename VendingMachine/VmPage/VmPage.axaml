<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="VendingMachine.VmPage" x:CompileBindings="False">
  <Grid RowDefinitions="Auto, Auto, *, Auto" Margin="20 10">
    <DockPanel LastChildFill="False" Margin="0 5">
      <TextBlock Text="Торговые автоматы" DockPanel.Dock="Left" VerticalAlignment="Center"/>
      <ToggleButton Content="&#x2261;" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" x:Name="tileBtn" ToolTip.Tip="Плитка" Checked="ViewToggle_Checked" Unchecked="ViewModeToggle_Unchecked" DockPanel.Dock="Right"/>
      <ToggleButton Content="&#x25A6;" VerticalAlignment="Center" HorizontalAlignment="Center" Width="30" Height="30" x:Name="tableBtn" IsChecked="True" Checked="ViewToggle_Checked" Unchecked="ViewModeToggle_Unchecked" ToolTip.Tip="Таблица" DockPanel.Dock="Right"/>
    </DockPanel>
    <DockPanel Grid.Row="1" LastChildFill="False" Margin="0 10">
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="Показать " VerticalAlignment="Center"/>
        <ComboBox x:Name="PageSizeCb" SelectedIndex="0" Margin="2 0" SelectionChanged="PageSizeCB_SelectionChanged">
          <ComboBoxItem Content="5"/>
          <ComboBoxItem Content="10"/>
          <ComboBoxItem Content="15"/>
          <ComboBoxItem Content="Все"/>
        </ComboBox>
        <TextBlock Text=" записей" VerticalAlignment="Center"/>
      </StackPanel>
      <TextBox Watermark="Фильтр" x:Name="SearchTB" DockPanel.Dock="Left" Margin="5 0" TextChanged="SearchTB_TextChanged"/>
      <Button DockPanel.Dock="Right" Content="Добавить" Click="CreateVMBtn_Click"/>
      <Button DockPanel.Dock="Right" Content="Экспорт" Click="ReportCSVBtn_Click"/>
    </DockPanel>
    <DataGrid Grid.Row="2" AutoGenerateColumns="False" IsReadOnly="True" RowBackground="LightGray"
      x:Name="VMs_dg" GridLinesVisibility="All" FontSize="10" CanUserReorderColumns="True"
		  CanUserResizeColumns="True"
		  CanUserSortColumns="False">
      <DataGrid.Columns>
        <DataGridTextColumn Header="ID" Binding="{Binding ID_VM}"/>
        <DataGridTextColumn Header="Название" Binding="{Binding Name}"/>
        <DataGridTextColumn Header="Модель" Binding="{Binding FullModel}"/>
        <DataGridTextColumn Header="Компания" Binding="{Binding Company}"/>
        <DataGridTextColumn Header="Модем" Binding="{Binding Modem}"/>
        <DataGridTextColumn Header="Полный адрес" Binding="{Binding FullAddress}"/>
        <DataGridTextColumn Header="В работе с" Binding="{Binding InstallationDate}"/>
        <DataGridTemplateColumn Header="Действия">
          <DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
              <StackPanel Orientation="Horizontal">
                <Button Click="DeleteBtn_Click">
                  <Image Source="avares://VendingMachine/Image/DeleteIcon.png" Width="15" Height="15"/>
                </Button>
                <Button Click="EditBtn_Click">
                  <Image Source="avares://VendingMachine/Image/EditIcon.png" Width="15" Height="15"/>
                </Button>
                <Button Click="ModemBtn_Click">
                  <Image Source="avares://VendingMachine/Image/OpenLockIcon.png" Width="15" Height="15"/>
                </Button>
              </StackPanel>
            </DataTemplate>
          </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
      </DataGrid.Columns>
      <DataGrid.Styles>
        <Style Selector="DataGridCell">
          <Setter Property="FontSize" Value="11"/>
        </Style>
        <Style Selector="DataGridRow:nth-child(even)">
          <Setter Property="Background" Value="White"/>
        </Style>
        <Style Selector="DataGridColumnHeader">
          <Setter Property="Background" Value="Gray"/>
        </Style>
      </DataGrid.Styles>
    </DataGrid>
    <DockPanel IsVisible="False" Grid.Row="2" x:Name="VMs_dp">
      <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" >
        <ItemsControl x:Name="vMs_ug">
          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <WrapPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Border Padding="8" Margin="6" BorderThickness="1" CornerRadius="6" Background="WhiteSmoke" Width="200">
                <StackPanel>
                  <TextBlock Text="{Binding ID_VM}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding Name}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding FullModel}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding Company}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding Modem}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding FullAddress}" TextWrapping="Wrap"/>
                  <TextBlock Text="{Binding InstallationDate}" TextWrapping="Wrap"/>
                </StackPanel>
              </Border>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
    </DockPanel>
    <DockPanel LastChildFill="False" Grid.Row="3" Margin="0 10">
      <TextBlock x:Name="CountTb" DockPanel.Dock="Left"/>
      <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
        <Button Content="&lt;" Click="BackPageBtn_Click"/>
        <TextBlock x:Name="PageTb" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="3 0" Text="1"/>
        <Button Content=">" Click="NextPageBtn_Click"/>
      </StackPanel>
    </DockPanel>
  </Grid>
</UserControl>
